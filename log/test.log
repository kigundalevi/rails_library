  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "books"[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "author" varchar, "isbn" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "borrowings"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "borrowings" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "book_id" integer NOT NULL, "borrowed_date" datetime(6), "due_date" datetime(6), "returned_date" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_borrowings_on_book_id" ON "borrowings" ("book_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_borrowings_on_user_id" ON "borrowings" ("user_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime(6), "remember_created_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "admin" boolean DEFAULT 0)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (17.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aborrowings" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "book_id" integer NOT NULL, "borrowed_date" datetime(6), "due_date" datetime(6), "returned_date" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "tindex_aborrowings_on_user_id" ON "aborrowings" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_aborrowings_on_book_id" ON "aborrowings" ("book_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "aborrowings" ("id","user_id","book_id","borrowed_date","due_date","returned_date","created_at","updated_at")
                     SELECT "id","user_id","book_id","borrowed_date","due_date","returned_date","created_at","updated_at" FROM "borrowings"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "borrowings"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "borrowings" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "book_id" integer NOT NULL, "borrowed_date" datetime(6), "due_date" datetime(6), "returned_date" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_2d6421032c"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_borrowings_on_book_id" ON "borrowings" ("book_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_borrowings_on_user_id" ON "borrowings" ("user_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "borrowings" ("id","user_id","book_id","borrowed_date","due_date","returned_date","created_at","updated_at")
                     SELECT "id","user_id","book_id","borrowed_date","due_date","returned_date","created_at","updated_at" FROM "aborrowings"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "aborrowings"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.7ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aborrowings" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "book_id" integer NOT NULL, "borrowed_date" datetime(6), "due_date" datetime(6), "returned_date" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_aborrowings_on_user_id" ON "aborrowings" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_aborrowings_on_book_id" ON "aborrowings" ("book_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aborrowings" ("id","user_id","book_id","borrowed_date","due_date","returned_date","created_at","updated_at")
                     SELECT "id","user_id","book_id","borrowed_date","due_date","returned_date","created_at","updated_at" FROM "borrowings"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "borrowings"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "borrowings" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "book_id" integer NOT NULL, "borrowed_date" datetime(6), "due_date" datetime(6), "returned_date" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_2d6421032c"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
, CONSTRAINT "fk_rails_64d35f133d"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_borrowings_on_book_id" ON "borrowings" ("book_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_borrowings_on_user_id" ON "borrowings" ("user_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "borrowings" ("id","user_id","book_id","borrowed_date","due_date","returned_date","created_at","updated_at")
                     SELECT "id","user_id","book_id","borrowed_date","due_date","returned_date","created_at","updated_at" FROM "aborrowings"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "aborrowings"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250211190820)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250211170623),
(20250211170610),
(20250211170555);[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-02-14 08:24:55.169121', '2025-02-14 08:24:55.169126') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '6d2c4ec68f0aaf29d8e26afbc6cd2b71fe2c505c', '2025-02-14 08:24:55.175620', '2025-02-14 08:24:55.175624') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (1.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrowings";
DELETE FROM "users";
INSERT INTO "books" ("id", "title", "author", "isbn", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.421235', '2025-02-14 08:24:55.421235'), (298486374, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.421235', '2025-02-14 08:24:55.421235');
INSERT INTO "borrowings" ("id", "user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (980190962, 980190962, 980190962, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.424490', '2025-02-14 08:24:55.424490'), (298486374, 298486374, 298486374, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.424490', '2025-02-14 08:24:55.424490');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (980190962, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.427263', '2025-02-14 08:24:55.427263', '0'), (298486374, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.427263', '2025-02-14 08:24:55.427263', '0')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (1.8ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrowings";
DELETE FROM "users";
INSERT INTO "books" ("id", "title", "author", "isbn", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.484848', '2025-02-14 08:24:55.484848'), (298486374, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.484848', '2025-02-14 08:24:55.484848');
INSERT INTO "borrowings" ("id", "user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (980190962, 980190962, 980190962, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.485002', '2025-02-14 08:24:55.485002'), (298486374, 298486374, 298486374, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.485002', '2025-02-14 08:24:55.485002');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (980190962, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.485103', '2025-02-14 08:24:55.485103', '0'), (298486374, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.485103', '2025-02-14 08:24:55.485103', '0')[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrowings";
DELETE FROM "users";
INSERT INTO "books" ("id", "title", "author", "isbn", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.497178', '2025-02-14 08:24:55.497178'), (298486374, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.497178', '2025-02-14 08:24:55.497178');
INSERT INTO "borrowings" ("id", "user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (980190962, 980190962, 980190962, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.497283', '2025-02-14 08:24:55.497283'), (298486374, 298486374, 298486374, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.497283', '2025-02-14 08:24:55.497283');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (980190962, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.497361', '2025-02-14 08:24:55.497361', '0'), (298486374, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.497361', '2025-02-14 08:24:55.497361', '0')[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrowings";
DELETE FROM "users";
INSERT INTO "books" ("id", "title", "author", "isbn", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.524304', '2025-02-14 08:24:55.524304'), (298486374, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.524304', '2025-02-14 08:24:55.524304');
INSERT INTO "borrowings" ("id", "user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (980190962, 980190962, 980190962, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.524405', '2025-02-14 08:24:55.524405'), (298486374, 298486374, 298486374, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.524405', '2025-02-14 08:24:55.524405');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (980190962, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.524477', '2025-02-14 08:24:55.524477', '0'), (298486374, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.524477', '2025-02-14 08:24:55.524477', '0')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.6ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrowings";
DELETE FROM "users";
INSERT INTO "books" ("id", "title", "author", "isbn", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.535668', '2025-02-14 08:24:55.535668'), (298486374, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.535668', '2025-02-14 08:24:55.535668');
INSERT INTO "borrowings" ("id", "user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (980190962, 980190962, 980190962, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.538448', '2025-02-14 08:24:55.538448'), (298486374, 298486374, 298486374, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.538448', '2025-02-14 08:24:55.538448');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (980190962, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.538846', '2025-02-14 08:24:55.538846', '0'), (298486374, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.538846', '2025-02-14 08:24:55.538846', '0')[0m
  [1m[35m (5.8ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (3.4ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrowings";
DELETE FROM "users";
INSERT INTO "books" ("id", "title", "author", "isbn", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.564215', '2025-02-14 08:24:55.564215'), (298486374, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.564215', '2025-02-14 08:24:55.564215');
INSERT INTO "borrowings" ("id", "user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (980190962, 980190962, 980190962, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.564471', '2025-02-14 08:24:55.564471'), (298486374, 298486374, 298486374, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.564471', '2025-02-14 08:24:55.564471');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (980190962, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.564546', '2025-02-14 08:24:55.564546', '0'), (298486374, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.564546', '2025-02-14 08:24:55.564546', '0')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrowings";
DELETE FROM "users";
INSERT INTO "books" ("id", "title", "author", "isbn", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.585147', '2025-02-14 08:24:55.585147'), (298486374, 'MyString', 'MyString', 'MyString', '2025-02-14 08:24:55.585147', '2025-02-14 08:24:55.585147');
INSERT INTO "borrowings" ("id", "user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (980190962, 980190962, 980190962, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.585251', '2025-02-14 08:24:55.585251'), (298486374, 298486374, 298486374, '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-11 20:06:23', '2025-02-14 08:24:55.585251', '2025-02-14 08:24:55.585251');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (980190962, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.585327', '2025-02-14 08:24:55.585327', '0'), (298486374, '', '', NULL, NULL, NULL, '2025-02-14 08:24:55.585327', '2025-02-14 08:24:55.585327', '0')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (9.4ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "1234567890"], ["LIMIT", 1]]
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Test Book"], ["author", "Test Author"], ["isbn", "1234567890"], ["created_at", "2025-02-14 08:31:20.995829"], ["updated_at", "2025-02-14 08:31:20.995829"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by BooksController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering books/index.html.erb within layouts/application
  Template rendering was prevented by rspec-rails. Use `render_views` to verify rendered view contents if necessary.
  Rendered books/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Template rendering was prevented by rspec-rails. Use `render_views` to verify rendered view contents if necessary.
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 5.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 08:31:21.141770"], ["updated_at", "2025-02-14 08:31:21.141770"], ["admin", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Processing by BooksController#create as HTML
  Parameters: {"book" => {"author" => "Test Author", "isbn" => "1234567890", "title" => "Test Book"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "1234567890"], ["LIMIT", 1]]
  [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Test Book"], ["author", "Test Author"], ["isbn", "1234567890"], ["created_at", "2025-02-14 08:31:21.160517"], ["updated_at", "2025-02-14 08:31:21.160517"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/books/1
Completed 302 Found in 10ms (ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBook Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 08:31:21.174775"], ["updated_at", "2025-02-14 08:31:21.174775"], ["admin", 0]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Processing by BooksController#create as HTML
  Parameters: {"book" => {"author" => "Test Author", "isbn" => "1234567890", "title" => "Test Book"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://test.host/books
Filter chain halted as :ensure_admin! rendered or redirected
Completed 302 Found in 12ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mBook Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 08:31:21.245109"], ["updated_at", "2025-02-14 08:31:21.245109"], ["admin", 0]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBorrowing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "borrowings"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "9780000000001"], ["LIMIT", 1]]
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Book Title 1"], ["author", "Author 1"], ["isbn", "9780000000001"], ["created_at", "2025-02-14 08:31:21.252770"], ["updated_at", "2025-02-14 08:31:21.252770"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by BorrowingsController#create as HTML
  Parameters: {"book_id" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowing Create (0.4ms)[0m  [1m[32mINSERT INTO "borrowings" ("user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["user_id", 1], ["book_id", 1], ["borrowed_date", "2025-02-14 08:31:21.269067"], ["due_date", "2025-02-28 08:31:21.269093"], ["returned_date", nil], ["created_at", "2025-02-14 08:31:21.285528"], ["updated_at", "2025-02-14 08:31:21.285528"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/books/1
Completed 302 Found in 32ms (ActiveRecord: 1.5ms (3 queries, 0 cached) | GC: 2.8ms)
  [1m[36mBorrowing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "borrowings"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 08:31:21.302621"], ["updated_at", "2025-02-14 08:31:21.302621"], ["admin", 0]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "9780000000002"], ["LIMIT", 1]]
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Book Title 2"], ["author", "Author 2"], ["isbn", "9780000000002"], ["created_at", "2025-02-14 08:31:21.315857"], ["updated_at", "2025-02-14 08:31:21.315857"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by BorrowingsController#create as HTML
  Parameters: {"book_id" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowing Create (1.2ms)[0m  [1m[32mINSERT INTO "borrowings" ("user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["user_id", 1], ["book_id", 1], ["borrowed_date", "2025-02-14 08:31:21.333708"], ["due_date", "2025-02-28 08:31:21.333733"], ["returned_date", nil], ["created_at", "2025-02-14 08:31:21.337917"], ["updated_at", "2025-02-14 08:31:21.337917"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/books/1
Completed 302 Found in 32ms (ActiveRecord: 1.6ms (3 queries, 0 cached) | GC: 0.6ms)
  [1m[36mBorrowing Load (0.2ms)[0m  [1m[34mSELECT "borrowings".* FROM "borrowings" ORDER BY "borrowings"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "9780000000003"], ["LIMIT", 1]]
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Book Title 3"], ["author", "Author 3"], ["isbn", "9780000000003"], ["created_at", "2025-02-14 08:31:21.383864"], ["updated_at", "2025-02-14 08:31:21.383864"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by BorrowingsController#create as HTML
  Parameters: {"book_id" => "1"}
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 08:31:21.415471"], ["updated_at", "2025-02-14 08:31:21.415471"], ["admin", 0]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "9780000000004"], ["LIMIT", 1]]
  [1m[36mBook Create (0.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Book Title 4"], ["author", "Author 4"], ["isbn", "9780000000004"], ["created_at", "2025-02-14 08:31:21.429256"], ["updated_at", "2025-02-14 08:31:21.429256"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowing Create (1.5ms)[0m  [1m[32mINSERT INTO "borrowings" ("user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["user_id", 1], ["book_id", 1], ["borrowed_date", "2025-02-14 08:31:21.442207"], ["due_date", "2025-02-28 08:31:21.442246"], ["returned_date", nil], ["created_at", "2025-02-14 08:31:21.442785"], ["updated_at", "2025-02-14 08:31:21.442785"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by BorrowingsController#return_book as HTML
  Parameters: {"id" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBorrowing Load (1.1ms)[0m  [1m[34mSELECT "borrowings".* FROM "borrowings" WHERE "borrowings"."user_id" = ? AND "borrowings"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowing Update (1.4ms)[0m  [1m[33mUPDATE "borrowings" SET "returned_date" = ?, "updated_at" = ? WHERE "borrowings"."id" = ?[0m  [["returned_date", "2025-02-14 08:31:21.491208"], ["updated_at", "2025-02-14 08:31:21.492827"], ["id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/profile
Completed 302 Found in 94ms (ActiveRecord: 2.7ms (3 queries, 0 cached) | GC: 0.8ms)
  [1m[36mBorrowing Load (1.1ms)[0m  [1m[34mSELECT "borrowings".* FROM "borrowings" WHERE "borrowings"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mBook Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "978-0743273565"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mBook Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mBook Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBook Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mBook Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", ""], ["LIMIT", 1]]
  [1m[36mBook Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mBook Load (7.4ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Create (1.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", nil], ["author", nil], ["isbn", nil], ["created_at", "2025-02-14 08:31:21.658185"], ["updated_at", "2025-02-14 08:31:21.658185"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Update (0.7ms)[0m  [1m[33mUPDATE "books" SET "isbn" = ?, "updated_at" = ? WHERE "books"."id" = ?[0m  [["isbn", "dummy value"], ["updated_at", "2025-02-14 08:31:21.662794"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "dummy value"], ["LIMIT", 1]]
  [1m[36mBook Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 08:31:21.714210"], ["updated_at", "2025-02-14 08:31:21.714210"], ["admin", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 08:31:21.726533"], ["updated_at", "2025-02-14 08:31:21.726533"], ["admin", 0]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 08:31:21.735756"], ["updated_at", "2025-02-14 08:31:21.735756"], ["admin", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2025-02-14 11:31:21 +0300
Processing by BooksController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 17.2ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (9.3ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "1234567890"], ["LIMIT", 1]]
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Test Book"], ["author", "Test Author"], ["isbn", "1234567890"], ["created_at", "2025-02-14 16:26:55.578560"], ["updated_at", "2025-02-14 16:26:55.578560"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by BooksController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering books/index.html.erb within layouts/application
  Template rendering was prevented by rspec-rails. Use `render_views` to verify rendered view contents if necessary.
  Rendered books/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Template rendering was prevented by rspec-rails. Use `render_views` to verify rendered view contents if necessary.
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 5.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 16:26:55.733292"], ["updated_at", "2025-02-14 16:26:55.733292"], ["admin", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Processing by BooksController#create as HTML
  Parameters: {"book" => {"author" => "Test Author", "isbn" => "1234567890", "title" => "Test Book"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "1234567890"], ["LIMIT", 1]]
  [1m[36mBook Create (0.5ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Test Book"], ["author", "Test Author"], ["isbn", "1234567890"], ["created_at", "2025-02-14 16:26:55.760319"], ["updated_at", "2025-02-14 16:26:55.760319"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/books/1
Completed 302 Found in 18ms (ActiveRecord: 1.3ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBook Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 16:26:55.782189"], ["updated_at", "2025-02-14 16:26:55.782189"], ["admin", 0]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
Processing by BooksController#create as HTML
  Parameters: {"book" => {"author" => "Test Author", "isbn" => "1234567890", "title" => "Test Book"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://test.host/books
Filter chain halted as :ensure_admin! rendered or redirected
Completed 302 Found in 20ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mBook Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "books"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 16:26:55.833409"], ["updated_at", "2025-02-14 16:26:55.833409"], ["admin", 0]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBorrowing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "borrowings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "9780000000001"], ["LIMIT", 1]]
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Book Title 1"], ["author", "Author 1"], ["isbn", "9780000000001"], ["created_at", "2025-02-14 16:26:55.844776"], ["updated_at", "2025-02-14 16:26:55.844776"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by BorrowingsController#create as HTML
  Parameters: {"book_id" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowing Create (0.5ms)[0m  [1m[32mINSERT INTO "borrowings" ("user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["user_id", 1], ["book_id", 1], ["borrowed_date", "2025-02-14 16:26:55.867118"], ["due_date", "2025-02-28 16:26:55.867157"], ["returned_date", nil], ["created_at", "2025-02-14 16:26:55.896765"], ["updated_at", "2025-02-14 16:26:55.896765"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/books/1
Completed 302 Found in 49ms (ActiveRecord: 2.3ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBorrowing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "borrowings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 16:26:55.912678"], ["updated_at", "2025-02-14 16:26:55.912678"], ["admin", 0]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "9780000000002"], ["LIMIT", 1]]
  [1m[36mBook Create (0.3ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Book Title 2"], ["author", "Author 2"], ["isbn", "9780000000002"], ["created_at", "2025-02-14 16:26:55.928445"], ["updated_at", "2025-02-14 16:26:55.928445"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by BorrowingsController#create as HTML
  Parameters: {"book_id" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowing Create (1.1ms)[0m  [1m[32mINSERT INTO "borrowings" ("user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["user_id", 1], ["book_id", 1], ["borrowed_date", "2025-02-14 16:26:55.959054"], ["due_date", "2025-02-28 16:26:55.959086"], ["returned_date", nil], ["created_at", "2025-02-14 16:26:55.965626"], ["updated_at", "2025-02-14 16:26:55.965626"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/books/1
Completed 302 Found in 45ms (ActiveRecord: 1.6ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBorrowing Load (0.2ms)[0m  [1m[34mSELECT "borrowings".* FROM "borrowings" ORDER BY "borrowings"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "9780000000003"], ["LIMIT", 1]]
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Book Title 3"], ["author", "Author 3"], ["isbn", "9780000000003"], ["created_at", "2025-02-14 16:26:56.018184"], ["updated_at", "2025-02-14 16:26:56.018184"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by BorrowingsController#create as HTML
  Parameters: {"book_id" => "1"}
Completed 401 Unauthorized in 6ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 16:26:56.060803"], ["updated_at", "2025-02-14 16:26:56.060803"], ["admin", 0]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "9780000000004"], ["LIMIT", 1]]
  [1m[36mBook Create (0.9ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", "Book Title 4"], ["author", "Author 4"], ["isbn", "9780000000004"], ["created_at", "2025-02-14 16:26:56.078878"], ["updated_at", "2025-02-14 16:26:56.078878"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowing Create (2.0ms)[0m  [1m[32mINSERT INTO "borrowings" ("user_id", "book_id", "borrowed_date", "due_date", "returned_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["user_id", 1], ["book_id", 1], ["borrowed_date", "2025-02-14 16:26:56.099300"], ["due_date", "2025-02-28 16:26:56.099352"], ["returned_date", nil], ["created_at", "2025-02-14 16:26:56.100110"], ["updated_at", "2025-02-14 16:26:56.100110"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by BorrowingsController#return_book as HTML
  Parameters: {"id" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBorrowing Load (0.9ms)[0m  [1m[34mSELECT "borrowings".* FROM "borrowings" WHERE "borrowings"."user_id" = ? AND "borrowings"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowing Update (0.5ms)[0m  [1m[33mUPDATE "borrowings" SET "returned_date" = ?, "updated_at" = ? WHERE "borrowings"."id" = ?[0m  [["returned_date", "2025-02-14 16:26:56.158462"], ["updated_at", "2025-02-14 16:26:56.159463"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/profile
Completed 302 Found in 81ms (ActiveRecord: 1.7ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBorrowing Load (0.5ms)[0m  [1m[34mSELECT "borrowings".* FROM "borrowings" WHERE "borrowings"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mBook Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "978-0743273565"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mBook Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBook Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mBook Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBook Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mBook Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", ""], ["LIMIT", 1]]
  [1m[36mBook Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (7.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mBook Load (8.3ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Create (2.6ms)[0m  [1m[32mINSERT INTO "books" ("title", "author", "isbn", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["title", nil], ["author", nil], ["isbn", nil], ["created_at", "2025-02-14 16:26:56.324211"], ["updated_at", "2025-02-14 16:26:56.324211"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Update (0.7ms)[0m  [1m[33mUPDATE "books" SET "isbn" = ?, "updated_at" = ? WHERE "books"."id" = ?[0m  [["isbn", "dummy value"], ["updated_at", "2025-02-14 16:26:56.333668"], ["id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "dummy value"], ["LIMIT", 1]]
  [1m[36mBook Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."isbn" = ? LIMIT ?[0m  [["isbn", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 16:26:56.401254"], ["updated_at", "2025-02-14 16:26:56.401254"], ["admin", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 16:26:56.412223"], ["updated_at", "2025-02-14 16:26:56.412223"], ["admin", 0]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-02-14 16:26:56.423167"], ["updated_at", "2025-02-14 16:26:56.423167"], ["admin", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/books" for 127.0.0.1 at 2025-02-14 19:26:56 +0300
Processing by BooksController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering books/index.html.erb within layouts/application
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  Rendered books/index.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 82.0ms | GC: 53.4ms)
Completed 200 OK in 86ms (Views: 84.5ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 53.4ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
